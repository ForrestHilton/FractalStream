viewer:
  title: Mandelbrot set with smooth coloring
  style: complex-plane
  size: 512x512
  resizable: true
  z-coord: C
  initial-center: 0
  initial-pixel-size: 1/128
  code: |
      z : ℂ ⭠ 0
      k : ℤ ⭠ 0
      while k < max_iters and |z| < escape_radius
        z ⭠ z^2 + C
        k ⭠ k + 1
      if |z| < escape_radius then
        color ⭠ black
      else
        # see https://linas.org/art-gallery/escape/ray.html
        m : ℝ ⭠ k + 1 - log (log (|z|²) / (2 log escape_radius)) / log 2
        color ⭠ blend (2 arctan (m / 20) / pi, red, white)

configuration:
  title: Configuration
  size: 400x200
  vertical-contents:
    - text-entry:
        label: "Max. iterations:"
        value: "100"
        type: ℤ
        variable: max_iters
    - text-entry:
        label: "Escape radius:"
        value: 10
        type: ℝ
        variable: escape_radius
